<%- include('includes/header') %>

    <style>
        .notes-header {
            background: linear-gradient(rgba(0, 35, 71, 0.9), rgba(0, 35, 71, 0.9)), url('/frontend/assets/images/notes-bg.jpg');
            background-size: cover;
            padding: 150px 0 80px;
            color: var(--white);
            text-align: center;
        }

        .filter-section {
            background: var(--white);
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            margin-top: -50px;
            position: relative;
            z-index: 10;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .filter-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .filter-item select,
        .filter-item input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--radius-sm);
            font-family: inherit;
        }

        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .note-card {
            background: var(--white);
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid #eee;
            transition: var(--transition);
        }

        .note-card:hover {
            box-shadow: var(--shadow-lg);
            border-color: var(--secondary);
        }

        .note-type {
            background: var(--secondary-light);
            color: var(--primary);
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .note-card h4 {
            margin: 15px 0 10px;
            color: var(--primary);
        }

        .note-meta {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        .note-meta span {
            display: block;
            margin-bottom: 5px;
        }
    </style>

    <section class="notes-header">
        <div class="container">
            <h1>Digital Notes Library</h1>
            <p>Access high-quality study materials and resources curated by our expert faculty.</p>
        </div>
    </section>

    <div class="container">
        <div class="filter-section">
            <form action="/notes" method="GET" class="filter-grid">
                <div class="filter-item">
                    <label>Course</label>
                    <select name="course">
                        <option value="">All Courses</option>
                        <option value="1" <%=filters.course=='1' ? 'selected' : '' %>>BCA</option>
                        <option value="2" <%=filters.course=='2' ? 'selected' : '' %>>BA</option>
                        <option value="3" <%=filters.course=='3' ? 'selected' : '' %>>B.Com</option>
                        <option value="4" <%=filters.course=='4' ? 'selected' : '' %>>B.Sc</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>Semester</label>
                    <select name="semester">
                        <option value="">All Semesters</option>
                        <option value="1" <%=filters.semester=='1' ? 'selected' : '' %>>Semester 1</option>
                        <option value="2" <%=filters.semester=='2' ? 'selected' : '' %>>Semester 2</option>
                        <option value="3" <%=filters.semester=='3' ? 'selected' : '' %>>Semester 3</option>
                        <option value="4" <%=filters.semester=='4' ? 'selected' : '' %>>Semester 4</option>
                        <option value="5" <%=filters.semester=='5' ? 'selected' : '' %>>Semester 5</option>
                        <option value="6" <%=filters.semester=='6' ? 'selected' : '' %>>Semester 6</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>Search Subject</label>
                    <input type="text" name="subject" value="<%= filters.subject || '' %>"
                        placeholder="e.g. Data Structures">
                </div>
                <div class="filter-item" style="display: flex; align-items: flex-end;">
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Apply Filters</button>
                </div>
            </form>
        </div>

        <div class="section-padding">
            <div class="notes-grid">
                <% if (notes && notes.length> 0) { %>
                    <% notes.forEach(note=> { %>
                        <div class="note-card" data-aos="fade-up">
                            <span class="note-type">PDF</span>
                            <h4>
                                <%= note.title %>
                            </h4>
                            <div class="note-meta">
                                <span><i class="fas fa-book-open"></i> Subject: <%= note.subject %></span>
                                <span><i class="fas fa-layer-group"></i> Unit: <%= note.unit %></span>
                                <span><i class="fas fa-clock"></i> Uploaded: <%= new
                                        Date(note.upload_date).toLocaleDateString() %></span>
                            </div>
                            <div class="flex">
                                <a href="/<%= note.file_path %>" class="btn btn-outline"
                                    style="padding: 8px 15px; font-size: 0.9rem; flex: 1; margin-right: 10px;"
                                    target="_blank">View</a>
                                <a href="/<%= note.file_path %>" class="btn btn-primary"
                                    style="padding: 8px 15px; font-size: 0.9rem; flex: 1;" download>Download</a>
                            </div>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <div style="grid-column: 1 / -1; text-align: center; padding: 50px;">
                                    <i class="fas fa-folder-open"
                                        style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                                    <h3>No notes found</h3>
                                    <p>Try adjusting your filters or search keywords.</p>
                                </div>
                                <% } %>
            </div>
        </div>
    </div>

    <%- include('includes/footer') %>